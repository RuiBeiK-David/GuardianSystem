<!DOCTYPE html>

<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>实时监测数据</title>
    <!-- 引入 echarts.js 库 -->
    <script src="https://cdn.jsdelivr.net/npm/echarts@4.3.0/dist/echarts.min.js"></script>
    <!-- 引入 Bootstrap 和 jQuery 库 -->
    <link rel="stylesheet" href="https://cdn.staticfile.org/twitter-bootstrap/4.3.1/css/bootstrap.min.css">
    <script src="https://cdn.staticfile.org/jquery/3.2.1/jquery.min.js"></script>
    <script src="https://cdn.staticfile.org/twitter-bootstrap/4.3.1/js/bootstrap.min.js"></script>
</head>
<body>
    <div class="container">
        <h1 class="text-center">实时监测数据</h1>
        <div class="row">
            <div class="col-lg-6" id="eeg-chart"></div>
            <div class="col-lg-6" id="pulse-chart"></div>
        </div>
        <div class="row">
            <div class="col-lg-6" id="ecg-chart"></div>
            <div class="col-lg-6" id="bp-chart"></div>
        </div>
        <div class="row">
            <div class="col-lg-12" id="spo2-chart"></div>
        </div>
    </div>
    <script>
        $(document).ready(function(){
            //定义一个函数，用于获取并更新数据
            function updateData() {
                $.ajax({
                    url: 'show.php', // 替换为你的 PHP 后端地址
                    method: 'GET',
                    dataType: 'json',
                    success: function(response) {
                        eegChart.setOption({
                            xAxis: {},
                            series: [
                            {
                                name: '脑电',
                                data: response['脑电数据']
                            }
                            ]
                        });

                    },
                    error: function(xhr, status, error) {
                        console.log('获取数据失败');
                    }
                });
            }

            // 模拟数据
            var data = [];
            for (var i = 0; i < 100; i++) {
                data.push(Math.random() * 10 - 5);
            }
            // 模拟数据更新
            setInterval(function () {
                for (var i = 0; i < 10; i++) {
                    data.shift();
                    data.push(Math.random() * 10 - 5);
                }
                eegChart.setOption({
                    series: [
                        {
                            data: data
                        }
                    ]
                });
            }, 300);

            // 绘制脑电图表
            var eegChart = echarts.init(document.getElementById('eeg-chart'), null, {
                width: 600,
                height: 400
            });
            // 绘制脉搏图表
            var pulseChart = echarts.init(document.getElementById('pulse-chart'), null, {
                width: 600,
                height: 400
            });
            // 绘制心电图表
            var ecgChart = echarts.init(document.getElementById('ecg-chart'), null, {
                width: 600,
                height: 400
            });
            // 绘制血压图表
            var bpChart = echarts.init(document.getElementById('bp-chart'), null, {
                width: 600,
                height: 400
            });
            // 绘制血氧图表
            var spo2Chart = echarts.init(document.getElementById('spo2-chart'), null, {
                width: 600,
                height: 400
            });

            // 指定图表的配置项和数据

            // 脑电图配置
            var eegOption = {
                color: [
                    '#5470c6',
                ],
                title: {
                    text: '脑电'
                },
                tooltip: {
                    show: false,
                    trigger: 'axis',
                    axisPointer: {
                        type: 'line'
                    }
                },
                xAxis: {
                    type: 'category',
                    boundaryGap: false,
                    data: []
                },
                yAxis: {
                    type: 'value',
                    axisLine: {
                        show: false
                    },
                    axisTick: {
                        show: false
                    },
                    axisLabel: {
                        show: false
                    },
                    splitLine: {
                        show: false
                    }
                },
                series: [
                    {
                        type: 'line',
                        showSymbol: false,
                        hoverAnimation: false,
                        data: data
                    }
                ]
            };

            // 脉搏图配置
            var pulseOption = {
                color: [
                    '#5470c6',
                ],
                title: {
                    text: '脉搏'
                },
                tooltip: {},
                legend: {
                    data:[]
                },
                xAxis: {
                    data: []
                },
                yAxis: {},
                series: [{
                    name: '脉搏',
                    type: 'line',
                    data: [5, 20, 36, 10, 10, 20]
                }]
            };

            //心电图配置
            var ecgOption = {
                color: [
                    '#5470c6',
                ],
                title: {
                    text: '心电'
                },
                tooltip: {},
                legend: {
                    data:[]
                },
                xAxis: {
                    data: []
                },
                yAxis: {},
                series: [{
                    name: '心电',
                    type: 'line',
                    data: [5, 20, 36, 10, 10, 20]
                }]
            };

            //血压图配置
            var bpOption = {
                color: [
                    '#5470c6',
                ],
                title: {
                    text: '血压'
                },
                tooltip: {},
                legend: {
                    data:[]
                },
                xAxis: {
                    data: []
                },
                yAxis: {},
                series: [{
                    name: '血压',
                    type: 'line',
                    data: [5, 20, 36, 10, 10, 20]
                }]
            };

            //血氧图配置
            var spo2Option = {
                color: [
                    '#5470c6',
                ],
                title: {
                    text: '血氧'
                },
                tooltip: {},
                legend: {
                    data:[]
                },
                xAxis: {
                    data: []
                },
                yAxis: {},
                series: [{
                    name: '血氧',
                    type: 'line',
                    data: [5, 20, 36, 10, 10, 20]
                }]
            };
    
            // 使用刚指定的配置项和数据绘制各个图表。
            eegChart.setOption(eegOption);
            pulseChart.setOption(pulseOption);
            ecgChart.setOption(ecgOption);
            bpChart.setOption(bpOption);
            spo2Chart.setOption(spo2Option);

            // // 每两秒调用updateData进行数据更新
            // setInterval(updateData, 2000);
        });
    </script>
</body>
</html>